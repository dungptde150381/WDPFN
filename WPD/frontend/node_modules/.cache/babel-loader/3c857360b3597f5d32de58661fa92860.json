{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTableV5}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{myOrders,clearErrors}from'../../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ListOrders=()=>{const alert=useAlert();const dispatch=useDispatch();const{loading,error,orders}=useSelector(state=>state.myOrders);useEffect(()=>{dispatch(myOrders());if(error){alert.error(error);dispatch(clearErrors());}},[dispatch,alert,error]);const setOrders=()=>{const data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Số lượng',field:'numOfItems',sort:'asc'},{label:'Tổng tiền',field:'amount',sort:'asc'},{label:'Trạng thái',field:'status',sort:'asc'},{label:'Hành động',field:'actions',sort:'asc'}],rows:[]};orders.forEach(order=>{data.rows.push({id:order._id,numOfItems:order.orderItems.length,amount:\"\".concat(order.totalPrice.toLocaleString(),\"\\u0111\"),status:order.orderStatus&&String(order.orderStatus).includes('Đã giao hàng')?/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:order.orderStatus}):/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:order.orderStatus}),actions:/*#__PURE__*/_jsx(Link,{to:\"/order/\".concat(order._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\"})})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Đơn hàng của tôi'}),/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"\\u0110\\u01A1n h\\xE0ng c\\u1EE7a t\\xF4i\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTableV5,{data:setOrders(),className:\"px-3\",bordered:true,striped:true,hover:true})]});};export default ListOrders;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTableV5","MetaData","Loader","useAlert","useDispatch","useSelector","myOrders","clearErrors","jsx","_jsx","jsxs","_jsxs","ListOrders","alert","dispatch","loading","error","orders","state","setOrders","data","columns","label","field","sort","rows","forEach","order","push","id","_id","numOfItems","orderItems","length","amount","concat","totalPrice","toLocaleString","status","orderStatus","String","includes","style","color","children","actions","to","className","title","bordered","striped","hover"],"sources":["C:/Users/phamtiendung/Downloads/doan_2/doan/doan/frontend/src/components/order/ListOrders.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTableV5 } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { myOrders, clearErrors } from '../../actions/orderActions'\n\nconst ListOrders = () => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, orders } = useSelector(state => state.myOrders);\n\n    useEffect(() => {\n        dispatch(myOrders());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n    }, [dispatch, alert, error])\n\n    const setOrders = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Số lượng',\n                    field: 'numOfItems',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tổng tiền',\n                    field: 'amount',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Trạng thái',\n                    field: 'status',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                    sort: 'asc'\n                },\n            ],\n            rows: []\n        }\n\n        orders.forEach(order => {\n            data.rows.push({\n                id: order._id,\n                numOfItems: order.orderItems.length,\n                amount: `${(order.totalPrice).toLocaleString()}đ`,\n                status: order.orderStatus && String(order.orderStatus).includes('Đã giao hàng')\n                    ? <p style={{ color: 'green' }}>{order.orderStatus}</p>\n                    : <p style={{ color: 'red' }}>{order.orderStatus}</p>,\n                actions:\n                    <Link to={`/order/${order._id}`} className=\"btn btn-primary\">\n                        <i className=\"fa fa-eye\"></i>\n                    </Link>\n            })\n        })\n\n        return data;\n    }\n\n    return (\n        <Fragment>\n\n            <MetaData title={'Đơn hàng của tôi'} />\n\n            <h1 className=\"my-5\">Đơn hàng của tôi</h1>\n\n            {loading ? <Loader /> : (\n                <MDBDataTableV5\n                    data={setOrders()}\n                    className=\"px-3\"\n                    bordered\n                    striped\n                    hover\n                />\n            )}\n\n        </Fragment>\n    )\n}\n\nexport default ListOrders\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}