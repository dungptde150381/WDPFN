{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Route}from'react-router-dom';import Header from'./components/layout/Header';import Footer from'./components/layout/Footer';import Home from'./components/Home';import ProductDetails from'./components/product/ProductDetails';// Cart Imports\nimport Cart from'./components/cart/Cart';import Shipping from'./components/cart/Shipping';import ConfirmOrder from'./components/cart/ConfirmOrder';import Payment from'./components/cart/Payment';import OrderSuccess from'./components/cart/OrderSuccess';// Order Imports\nimport ListOrders from'./components/order/ListOrders';import OrderDetails from'./components/order/OrderDetails';// Auth or User imports\nimport Login from'./components/user/Login';import Register from'./components/user/Register';import Profile from'./components/user/Profile';import UpdateProfile from'./components/user/UpdateProfile';import UpdatePassword from'./components/user/UpdatePassword';import LookAccount from'./components/admin/LookAccount';// Admin Imports\nimport Dashboard from'./components/admin/Dashboard';import ProductsList from'./components/admin/ProductsList';import NewProduct from'./components/admin/NewProduct';import UpdateProduct from'./components/admin/UpdateProduct';import OrdersList from'./components/admin/OrdersList';import ProcessOrder from'./components/admin/ProcessOrder';import UsersList from'./components/admin/UsersList';import UpdateUser from'./components/admin/UpdateUser';import ProductReviews from'./components/admin/ProductReviews';import ProtectedRoute from'./components/route/ProtectedRoute';import{loadUser}from'./actions/userActions';import store from'./store';import axios from'axios';import{useSelector}from'react-redux';// Payment\nimport{Elements}from'@stripe/react-stripe-js';import{loadStripe}from'@stripe/stripe-js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[stripeApiKey,setStripeApiKey]=useState('');useEffect(()=>{store.dispatch(loadUser());async function getStripApiKey(){const{data}=await axios.get('/api/v1/stripeapi');setStripeApiKey(data.stripeApiKey);}getStripApiKey();},[]);const{user,isAuthenticated,loading}=useSelector(state=>state.auth);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",component:Home,exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/search/:keyword\",component:Home}),/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",component:ProductDetails,exact:true}),!loading&&(!isAuthenticated||user.role!=='admin')&&/*#__PURE__*/_jsx(Route,{path:\"/cart\",component:Cart,exact:true}),!loading&&(!isAuthenticated||user.role!=='admin')&&/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/orders/me\",component:ListOrders,exact:true}),!loading&&(!isAuthenticated||user.role!=='admin')&&/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/shipping\",component:Shipping}),!loading&&(!isAuthenticated||user.role!=='admin')&&/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/confirm\",component:ConfirmOrder,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/success\",component:OrderSuccess}),stripeApiKey&&/*#__PURE__*/_jsx(Elements,{stripe:loadStripe(stripeApiKey),children:/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/payment\",component:Payment})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",component:Login}),/*#__PURE__*/_jsx(Route,{path:\"/register\",component:Register}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/me\",component:Profile,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/me/update\",component:UpdateProfile,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/password/update\",component:UpdatePassword,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/order/:id\",component:OrderDetails,exact:true})]}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/dashboard\",isAdmin:true,component:Dashboard,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/products\",isAdmin:true,component:ProductsList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/product\",isAdmin:true,component:NewProduct,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/product/:id\",isAdmin:true,component:UpdateProduct,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/orders\",isAdmin:true,component:OrdersList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/order/:id\",isAdmin:true,component:ProcessOrder,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/users\",isAdmin:true,component:UsersList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/user/:id\",isAdmin:true,component:UpdateUser,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/reviews\",isAdmin:true,component:ProductReviews,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/look_user/:id\",isAdmin:true,component:LookAccount,exact:true}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Route","Header","Footer","Home","ProductDetails","Cart","Shipping","ConfirmOrder","Payment","OrderSuccess","ListOrders","OrderDetails","Login","Register","Profile","UpdateProfile","UpdatePassword","LookAccount","Dashboard","ProductsList","NewProduct","UpdateProduct","OrdersList","ProcessOrder","UsersList","UpdateUser","ProductReviews","ProtectedRoute","loadUser","store","axios","useSelector","Elements","loadStripe","jsx","_jsx","jsxs","_jsxs","App","stripeApiKey","setStripeApiKey","dispatch","getStripApiKey","data","get","user","isAuthenticated","loading","state","auth","children","className","path","component","exact","role","stripe","isAdmin"],"sources":["C:/Users/phamtiendung/Downloads/doan_2/doan/doan/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\n\nimport Header from './components/layout/Header'\nimport Footer from './components/layout/Footer'\n\nimport Home from './components/Home'\nimport ProductDetails from './components/product/ProductDetails'\n\n// Cart Imports\nimport Cart from './components/cart/Cart'\nimport Shipping from './components/cart/Shipping'\nimport ConfirmOrder from './components/cart/ConfirmOrder'\nimport Payment from './components/cart/Payment'\nimport OrderSuccess from './components/cart/OrderSuccess'\n\n// Order Imports\nimport ListOrders from './components/order/ListOrders'\nimport OrderDetails from './components/order/OrderDetails'\n\n// Auth or User imports\nimport Login from './components/user/Login'\nimport Register from './components/user/Register'\nimport Profile from './components/user/Profile'\nimport UpdateProfile from './components/user/UpdateProfile'\nimport UpdatePassword from './components/user/UpdatePassword'\nimport LookAccount from './components/admin/LookAccount'\n\n// Admin Imports\nimport Dashboard from './components/admin/Dashboard'\nimport ProductsList from './components/admin/ProductsList'\nimport NewProduct from './components/admin/NewProduct'\nimport UpdateProduct from './components/admin/UpdateProduct'\nimport OrdersList from './components/admin/OrdersList'\nimport ProcessOrder from './components/admin/ProcessOrder'\nimport UsersList from './components/admin/UsersList'\nimport UpdateUser from './components/admin/UpdateUser'\nimport ProductReviews from './components/admin/ProductReviews'\n\n\nimport ProtectedRoute from './components/route/ProtectedRoute'\nimport { loadUser } from './actions/userActions'\nimport store from './store'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\n\n\n// Payment\nimport { Elements } from '@stripe/react-stripe-js'\nimport { loadStripe } from '@stripe/stripe-js'\n\n\n\nfunction App() {\n\n  const [stripeApiKey, setStripeApiKey] = useState('');\n\n  useEffect(() => {\n    store.dispatch(loadUser())\n\n    async function getStripApiKey() {\n      const { data } = await axios.get('/api/v1/stripeapi');\n\n      setStripeApiKey(data.stripeApiKey)\n    }\n\n    getStripApiKey();\n\n  }, [])\n  const { user, isAuthenticated, loading } = useSelector(state => state.auth)\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Header />\n        <div>\n          <Route path=\"/\" component={Home} exact />\n          <Route path=\"/search/:keyword\" component={Home} />\n          <Route path=\"/product/:id\" component={ProductDetails} exact />\n\n          {!loading && (!isAuthenticated || user.role !== 'admin') && (\n            <Route path=\"/cart\" component={Cart} exact />       \n          )}\n          {!loading && (!isAuthenticated || user.role !== 'admin') && (\n            <ProtectedRoute path=\"/orders/me\" component={ListOrders} exact />\n          )}\n          {!loading && (!isAuthenticated || user.role !== 'admin') && (\n            <ProtectedRoute path=\"/shipping\" component={Shipping} />\n          )}\n          {!loading && (!isAuthenticated || user.role !== 'admin') && (\n            <ProtectedRoute path=\"/confirm\" component={ConfirmOrder} exact />\n          )} \n          <ProtectedRoute path=\"/success\" component={OrderSuccess} />\n          {stripeApiKey &&\n            <Elements stripe={loadStripe(stripeApiKey)}>\n              <ProtectedRoute path=\"/payment\" component={Payment} />\n            </Elements>\n          }\n\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n          <ProtectedRoute path=\"/me\" component={Profile} exact />\n          <ProtectedRoute path=\"/me/update\" component={UpdateProfile} exact />\n          <ProtectedRoute path=\"/password/update\" component={UpdatePassword} exact />\n\n          {/* <ProtectedRoute path=\"/orders/me\" component={ListOrders} exact /> */}\n          <ProtectedRoute path=\"/order/:id\" component={OrderDetails} exact />\n        </div>\n\n        <ProtectedRoute path=\"/dashboard\" isAdmin={true} component={Dashboard} exact />\n        <ProtectedRoute path=\"/admin/products\" isAdmin={true} component={ProductsList} exact />\n        <ProtectedRoute path=\"/admin/product\" isAdmin={true} component={NewProduct} exact />\n        <ProtectedRoute path=\"/admin/product/:id\" isAdmin={true} component={UpdateProduct} exact />\n        <ProtectedRoute path=\"/admin/orders\" isAdmin={true} component={OrdersList} exact />\n        <ProtectedRoute path=\"/admin/order/:id\" isAdmin={true} component={ProcessOrder} exact />\n        <ProtectedRoute path=\"/admin/users\" isAdmin={true} component={UsersList} exact />\n        <ProtectedRoute path=\"/admin/user/:id\" isAdmin={true} component={UpdateUser} exact />\n        <ProtectedRoute path=\"/admin/reviews\" isAdmin={true} component={ProductReviews} exact />\n        <ProtectedRoute path=\"/admin/look_user/:id\" isAdmin={true} component={LookAccount} exact />\n\n        {/* {!loading && (!isAuthenticated || user.role !== 'admin') && (\n          <Footer />\n        )} */}\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}