{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{allOrders,clearErrors}from'../../actions/orderActions';import{DELETE_ORDER_RESET}from'../../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const OrdersList=_ref=>{let{history}=_ref;const alert=useAlert();const dispatch=useDispatch();const{loading,error,orders}=useSelector(state=>state.allOrders);const{isDeleted}=useSelector(state=>state.order);useEffect(()=>{dispatch(allOrders());if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('Xóa hóa đơn thành công');history.push('/admin/orders');dispatch({type:DELETE_ORDER_RESET});}},[dispatch,alert,error,isDeleted,history]);const setOrders=()=>{const data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Số mặt hàng',field:'numofItems',sort:'asc'},{label:'Tổng tiền',field:'amount',sort:'asc'},{label:'Ngày tạo hóa đơn',field:'createdAt',sort:'asc'},{label:'Trạng thái',field:'status',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};orders.forEach(order=>{data.rows.push({id:order._id,numofItems:order.orderItems.length,amount:\"\".concat(order.totalPrice,\" VN\\u0110\"),createdAt:order.createdAt,status:order.orderStatus&&String(order.orderStatus).includes('Đã giao hàng')?/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:order.orderStatus}):/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:order.orderStatus}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[\"\\u2003\\u2003\\u2003\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/order/\".concat(order._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\"})})]})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Orders'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 \\u0111\\u01A1n h\\xE0ng\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setOrders(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default OrdersList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","allOrders","clearErrors","DELETE_ORDER_RESET","jsx","_jsx","jsxs","_jsxs","OrdersList","_ref","history","alert","dispatch","loading","error","orders","state","isDeleted","order","success","push","type","setOrders","data","columns","label","field","sort","rows","forEach","id","_id","numofItems","orderItems","length","amount","concat","totalPrice","createdAt","status","orderStatus","String","includes","style","color","children","actions","to","className","title","bordered","striped","hover"],"sources":["C:/Users/phamtiendung/Downloads/doan_2/doan/doan/frontend/src/components/admin/OrdersList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { allOrders, clearErrors } from '../../actions/orderActions'\nimport { DELETE_ORDER_RESET } from '../../constants/orderConstants'\n\nconst OrdersList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, orders } = useSelector(state => state.allOrders);\n    const { isDeleted } = useSelector(state => state.order)\n\n    useEffect(() => {\n        dispatch(allOrders());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('Xóa hóa đơn thành công');\n            history.push('/admin/orders');\n            dispatch({ type: DELETE_ORDER_RESET })\n        }\n\n    }, [dispatch, alert, error, isDeleted, history])\n\n\n\n    const setOrders = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Số mặt hàng',\n                    field: 'numofItems',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tổng tiền',\n                    field: 'amount',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Ngày tạo hóa đơn',\n                    field: 'createdAt',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Trạng thái',\n                    field: 'status',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        orders.forEach(order => {\n            data.rows.push({\n                id: order._id,\n                numofItems: order.orderItems.length,\n                amount: `${order.totalPrice} VNĐ`,\n                createdAt: order.createdAt,\n                status: order.orderStatus && String(order.orderStatus).includes('Đã giao hàng')\n                    ? <p style={{ color: 'green' }}>{order.orderStatus}</p>\n                    : <p style={{ color: 'red' }}>{order.orderStatus}</p>,\n                actions: <Fragment>\n                    &emsp;&emsp;&emsp;&emsp;\n                    <Link to={`/admin/order/${order._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-eye\"></i>\n                    </Link>\n\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n\n    return (\n        <Fragment>\n            <MetaData title={'All Orders'} />\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">Tất cả đơn hàng</h1>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setOrders()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default OrdersList\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}