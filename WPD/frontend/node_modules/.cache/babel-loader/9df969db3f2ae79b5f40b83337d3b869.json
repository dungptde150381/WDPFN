{"ast":null,"code":"import React,{Fragment,useState,useEffect}from'react';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{register,clearErrors}from'../../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Register=_ref=>{let{history}=_ref;const[user,setUser]=useState({name:'',email:'',password:'',address:'',phone:''});const{name,email,password,phone,address}=user;const[avatar,setAvatar]=useState('');const[avatarPreview,setAvatarPreview]=useState('/images/default_avatar.jpg');const alert=useAlert();const dispatch=useDispatch();const{isAuthenticated,error,loading}=useSelector(state=>state.auth);useEffect(()=>{if(isAuthenticated){history.push('/');}if(error){alert.error(error);dispatch(clearErrors());}},[dispatch,alert,isAuthenticated,error,history]);const submitHandler=e=>{e.preventDefault();const formData=new FormData();formData.set('name',name);formData.set('email',email);formData.set('password',password);formData.set('avatar',avatar);formData.set('phone',phone);formData.set('address',address);dispatch(register(formData));};const onChange=e=>{if(e.target.name==='avatar'){const reader=new FileReader();reader.onload=()=>{if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);}else{setUser({...user,[e.target.name]:e.target.value});}};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Đăng ký'}),/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",onSubmit:submitHandler,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"\\u0110\\u0103ng k\\xFD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone_field\",children:\"S\\u1ED1 \\u0110i\\u1EC7n Tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"phone_field\",className:\"form-control\",name:\"phone\",value:phone,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",name:\"password\",value:password,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address_field\",children:\"\\u0110\\u1ECBa ch\\u1EC9 \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address_field\",className:\"form-control\",name:\"address\",value:address,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"H\\xECnh n\\u1EC1n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"\\u1EA2nh n\\u1EC1n\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"iamges/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Ch\\u1ECDn \\u1EA3nh\"})]})]})]}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(\"button\",{id:\"register_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading?true:false,children:\"\\u0110\\u0102NG K\\xDD\"})]})})})]});};export default Register;","map":{"version":3,"names":["React","Fragment","useState","useEffect","MetaData","Loader","useAlert","useDispatch","useSelector","register","clearErrors","jsx","_jsx","jsxs","_jsxs","Register","_ref","history","user","setUser","name","email","password","address","phone","avatar","setAvatar","avatarPreview","setAvatarPreview","alert","dispatch","isAuthenticated","error","loading","state","auth","push","submitHandler","e","preventDefault","formData","FormData","set","onChange","target","reader","FileReader","onload","readyState","result","readAsDataURL","files","value","children","title","className","onSubmit","encType","htmlFor","type","id","src","alt","accept","disabled"],"sources":["C:/Users/phamtiendung/Downloads/doan_2/doan/doan/frontend/src/components/user/Register.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { register, clearErrors } from '../../actions/userActions'\n\nconst Register = ({ history }) => {\n  const [user, setUser] = useState({\n    name: '',\n    email: '',\n    password: '',\n    address: '',\n    phone: '',\n  })\n\n  const { name, email, password, phone, address } = user\n\n  const [avatar, setAvatar] = useState('')\n  const [avatarPreview, setAvatarPreview] = useState(\n    '/images/default_avatar.jpg'\n  )\n\n  const alert = useAlert()\n  const dispatch = useDispatch()\n\n  const { isAuthenticated, error, loading } = useSelector(state => state.auth)\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      history.push('/')\n    }\n\n    if (error) {\n      alert.error(error)\n      dispatch(clearErrors())\n    }\n  }, [dispatch, alert, isAuthenticated, error, history])\n\n  const submitHandler = e => {\n    e.preventDefault()\n\n    const formData = new FormData()\n    formData.set('name', name)\n    formData.set('email', email)\n    formData.set('password', password)\n    formData.set('avatar', avatar)\n    formData.set('phone', phone)\n    formData.set('address', address)\n\n    dispatch(register(formData))\n  }\n\n  const onChange = e => {\n    if (e.target.name === 'avatar') {\n      const reader = new FileReader()\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setAvatarPreview(reader.result)\n          setAvatar(reader.result)\n        }\n      }\n\n      reader.readAsDataURL(e.target.files[0])\n    } else {\n      setUser({ ...user, [e.target.name]: e.target.value })\n    }\n  }\n\n  return (\n    <Fragment>\n      <MetaData title={'Đăng ký'} />\n\n      <div className=\"row wrapper\">\n        <div className=\"col-10 col-lg-5\">\n          <form\n            className=\"shadow-lg\"\n            onSubmit={submitHandler}\n            encType=\"multipart/form-data\"\n          >\n            <h1 className=\"mb-3\">Đăng ký</h1>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Tên</label>\n              <input\n                type=\"name\"\n                id=\"name_field\"\n                className=\"form-control\"\n                name=\"name\"\n                value={name}\n                onChange={onChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"phone_field\">Số Điện Thoại</label>\n              <input\n                type=\"number\"\n                id=\"phone_field\"\n                className=\"form-control\"\n                name=\"phone\"\n                value={phone}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                name=\"email\"\n                value={email}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Mật khẩu</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={onChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"address_field\">Địa chỉ </label>\n              <input\n                type=\"text\"\n                id=\"address_field\"\n                className=\"form-control\"\n                name=\"address\"\n                value={address}\n                onChange={onChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"avatar_upload\">Hình nền</label>\n              <div className=\"d-flex align-items-center\">\n                <div>\n                  <figure className=\"avatar mr-3 item-rtl\">\n                    <img\n                      src={avatarPreview}\n                      className=\"rounded-circle\"\n                      alt=\"Ảnh nền\"\n                    />\n                  </figure>\n                </div>\n                <div className=\"custom-file\">\n                  <input\n                    type=\"file\"\n                    name=\"avatar\"\n                    className=\"custom-file-input\"\n                    id=\"customFile\"\n                    accept=\"iamges/*\"\n                    onChange={onChange}\n                  />\n                  <label className=\"custom-file-label\" htmlFor=\"customFile\">\n                    Chọn ảnh\n                  </label>\n                </div>\n              </div>\n            </div>\n            {loading ? (\n              <Loader />\n            ) : (\n              <button\n                id=\"register_button\"\n                type=\"submit\"\n                className=\"btn btn-block py-3\"\n                disabled={loading ? true : false}\n              >\n                ĐĂNG KÝ\n              </button>\n            )}\n          </form>\n        </div>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default Register\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}