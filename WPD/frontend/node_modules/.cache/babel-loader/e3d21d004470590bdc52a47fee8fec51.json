{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,deleteProduct,clearErrors}from'../../actions/productActions';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductsList=_ref=>{let{history}=_ref;const alert=useAlert();const dispatch=useDispatch();const{loading,error,products}=useSelector(state=>state.products);const{error:deleteError,isDeleted}=useSelector(state=>state.product);useEffect(()=>{dispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success('Product deleted successfully');history.push('/admin/products');dispatch({type:DELETE_PRODUCT_RESET});}},[dispatch,alert,error,deleteError,isDeleted,history]);const setProducts=()=>{const data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Tên sản phẩm',field:'name',sort:'asc'},{label:'Giá',field:'price',sort:'asc'},{label:'Số lượng còn lại',field:'stock',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};products.forEach(product=>{data.rows.push({id:product._id,name:product.name,price:\"\".concat(product.price.toLocaleString(),\" VN\\u0110\"),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"Th\\xF4ng b\\xE1o!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-body\",children:\"B\\u1EA1n c\\xF3 mu\\u1ED1n x\\xF3a kh\\xF4ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:()=>deleteProductHandler(product._id),\"data-dismiss\":\"modal\",children:\"X\\xF3a\"})]})]})})})})]})});});return data;};const deleteProductHandler=id=>{dispatch(deleteProduct(id));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Tất cả sản phẩm'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",children:\"Th\\xEAm s\\u1EA3n ph\\u1EA9m m\\u1EDBi\"})}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default ProductsList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","getAdminProducts","deleteProduct","clearErrors","DELETE_PRODUCT_RESET","jsx","_jsx","jsxs","_jsxs","ProductsList","_ref","history","alert","dispatch","loading","error","products","state","deleteError","isDeleted","product","success","push","type","setProducts","data","columns","label","field","sort","rows","forEach","id","_id","name","price","concat","toLocaleString","stock","actions","children","to","className","tabIndex","role","class","onClick","deleteProductHandler","title","bordered","striped","hover"],"sources":["C:/Users/phamtiendung/Downloads/doan_2/doan/doan/frontend/src/components/admin/ProductsList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getAdminProducts, deleteProduct, clearErrors } from '../../actions/productActions'\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants'\n\nconst ProductsList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, products } = useSelector(state => state.products);\n    const { error: deleteError, isDeleted } = useSelector(state => state.product)\n\n    useEffect(() => {\n        dispatch(getAdminProducts());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (deleteError) {\n            alert.error(deleteError);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('Product deleted successfully');\n            history.push('/admin/products');\n            dispatch({ type: DELETE_PRODUCT_RESET })\n        }\n\n    }, [dispatch, alert, error, deleteError, isDeleted, history])\n\n    const setProducts = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tên sản phẩm',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Giá',\n                    field: 'price',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Số lượng còn lại',\n                    field: 'stock',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        products.forEach(product => {\n            data.rows.push({\n                id: product._id,\n                name: product.name,\n                price: `${(product.price).toLocaleString()} VNĐ`,\n                stock: product.stock,\n                actions: <Fragment>\n                    <Link to={`/admin/product/${product._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-pencil\"></i>\n                    </Link>\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" data-toggle=\"modal\" data-target=\"#exampleModal\" >\n                        <i className=\"fa fa-trash\"></i>\n                    </button>\n                    {/* model delete */}\n                    <div>\n                        <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                            <div className=\"modal-dialog\" role=\"document\">\n                                <div className=\"modal-content\">\n                                    <div className=\"modal-header\">\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">Thông báo!</h5>\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                            <span aria-hidden=\"true\">×</span>\n                                        </button>\n                                    </div>\n                                    <div class=\"modal-body\">\n                                        Bạn có muốn xóa không\n                                    </div>\n                                    <div className=\"modal-footer\">\n                                        <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Hủy</button>\n                                        <button type=\"button\" className=\"btn btn-danger\" onClick={() => deleteProductHandler(product._id)} data-dismiss=\"modal\">Xóa</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n    const deleteProductHandler = (id) => {\n        dispatch(deleteProduct(id))\n    }\n\n    return (\n        <Fragment>\n            <MetaData title={'Tất cả sản phẩm'} />\n\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">Tất cả sản phẩm</h1>\n                        <Link to='/admin/product'><button type=\"button\" className=\"btn btn-primary\">Thêm sản phẩm mới</button></Link>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setProducts()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default ProductsList\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}